pub type Figure = char;

/// Contains all moves a figure can make.
/// `(127, 127)` and `[(127, 127); 7]` are filler moves to fill the array to the right size. They should be ignored.
///
/// A movement set contains multiple movement sub sets.
/// Movement sub sets are independent of each other
/// but if a figure cannot make one move of a movement sub set,
/// it also cannot do any of the following moves of that movement sub set.
///
/// **Example**
/// ```
/// [
///     [
///     (1, 1),
///     (2, 2),
///     (3, 3),
///     ...
///     ],
///     [
///     (-1, -1),
///     (-2, -2),
///     (-3, -3),
///     ...
///     ]
/// ]
/// ```
/// Let's say the figure can move `(1, 1)`, but not `(2, 2)`. Then only `(1, 1)` is a possible move of that sub set.
/// `(3, 3)` is not possible, because could only be possible if `(2, 2)` is possible.
///
/// The next sub set `(-1, -1), (-2, -2), (-3, -3)` could still be possible.
pub type MovementSet = [MovementSubSet; 8];
pub type MovementSubSet = [(i8, i8); 7];

pub const WHITE_PAWN: Figure = '♙';
pub const WHITE_KNIGHT: Figure = '♘';
pub const WHITE_BISHOP: Figure = '♗';
pub const WHITE_ROOK: Figure = '♖';
pub const WHITE_QUEEN: Figure = '♕';
pub const WHITE_KING: Figure = '♔';

pub const BLACK_PAWN: Figure = '♟';
pub const BLACK_KNIGHT: Figure = '♞';
pub const BLACK_BISHOP: Figure = '♝';
pub const BLACK_ROOK: Figure = '♜';
pub const BLACK_QUEEN: Figure = '♛';
pub const BLACK_KING: Figure = '♚';

pub const CAUGHT: Figure = '\u{FFFF}';

static MOVEMENT_KNIGHT: MovementSet = [
    [
        (2, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (2, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, 2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, 2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-2, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-2, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, -2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, -2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
];

static MOVEMENT_BISHOP: MovementSet = [
    [(1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7)],
    [
        (1, -1),
        (2, -2),
        (3, -3),
        (4, -4),
        (5, -5),
        (6, -6),
        (7, -7),
    ],
    [
        (-1, 1),
        (-2, 2),
        (-3, 3),
        (-4, 4),
        (-5, 5),
        (-6, 6),
        (-7, 7),
    ],
    [
        (-1, -1),
        (-2, -2),
        (-3, -3),
        (-4, -4),
        (-5, -5),
        (-6, -6),
        (-7, -7),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

static MOVEMENT_ROOK: MovementSet = [
    [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0), (7, 0)],
    [(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7)],
    [
        (-1, 0),
        (-2, 0),
        (-3, 0),
        (-4, 0),
        (-5, 0),
        (-6, 0),
        (-7, 0),
    ],
    [
        (0, -1),
        (0, -2),
        (0, -3),
        (0, -4),
        (0, -5),
        (0, -6),
        (0, -7),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

static MOVEMENT_QUEEN: MovementSet = [
    [(1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7)],
    [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0), (7, 0)],
    [(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7)],
    [
        (1, -1),
        (2, -2),
        (3, -3),
        (4, -4),
        (5, -5),
        (6, -6),
        (7, -7),
    ],
    [
        (-1, 1),
        (-2, 2),
        (-3, 3),
        (-4, 4),
        (-5, 5),
        (-6, 6),
        (-7, 7),
    ],
    [
        (-1, -1),
        (-2, -2),
        (-3, -3),
        (-4, -4),
        (-5, -5),
        (-6, -6),
        (-7, -7),
    ],
    [
        (-1, 0),
        (-2, 0),
        (-3, 0),
        (-4, 0),
        (-5, 0),
        (-6, 0),
        (-7, 0),
    ],
    [
        (0, -1),
        (0, -2),
        (0, -3),
        (0, -4),
        (0, -5),
        (0, -6),
        (0, -7),
    ],
];

static MOVEMENT_KING: MovementSet = [
    [
        (1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, 0),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (0, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, 0),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (0, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
];

static MOVEMENT_WHITE_PAWN_UNMOVED: MovementSet = [
    [
        (0, 1),
        (0, 2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

static MOVEMENT_WHITE_PAWN_MOVED: MovementSet = [
    [
        (0, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, 1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

static MOVEMENT_BLACK_PAWN_UNMOVED: MovementSet = [
    [
        (0, -1),
        (0, -2),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

static MOVEMENT_BLACK_PAWN_MOVED: MovementSet = [
    [
        (0, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [
        (-1, -1),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
        (127, 127),
    ],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
    [(127, 127); 7],
];

pub fn get_moves(figure: Figure, y: i8) -> MovementSet {
    match figure {
        WHITE_KNIGHT => MOVEMENT_KNIGHT,
        BLACK_KNIGHT => MOVEMENT_KNIGHT,
        WHITE_BISHOP => MOVEMENT_BISHOP,
        BLACK_BISHOP => MOVEMENT_BISHOP,
        WHITE_QUEEN => MOVEMENT_QUEEN,
        BLACK_QUEEN => MOVEMENT_QUEEN,
        WHITE_KING => MOVEMENT_KING,
        BLACK_KING => MOVEMENT_KING,
        WHITE_PAWN => {
            if y == 2 {
                MOVEMENT_WHITE_PAWN_UNMOVED
            } else {
                MOVEMENT_WHITE_PAWN_MOVED
            }
        }
        BLACK_PAWN => {
            if y == 7 {
                MOVEMENT_BLACK_PAWN_UNMOVED
            } else {
                MOVEMENT_BLACK_PAWN_MOVED
            }
        }
        _ => panic!("That figure does not exist!"),
    }
}
